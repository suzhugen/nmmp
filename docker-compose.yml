version: '3.3'
services:
  web:
   image: nginx:1.13.7
    # build: ./nginx/
    # image: cweb:1.0
    container_name: nginx
    # depends_on:
    #   - php
    ports:
      # - "80:80"
      - "80:80"
    environment:
      - NGINX_PORT=80
    command: "nginx -g 'daemon off';"
    restart: always
    links:
      - php:php
    volumes:
      - /data/www/:/usr/share/nginx/html
      - /data/nginx/conf/conf.d/:/etc/nginx/conf.d/
      # - /Users/suzhugen/Documents/dev/www:/usr/share/nginx/html
      # - /Users/suzhugen/Documents/dev/git/nmmp/nmmp/nginx/:/etc/nginx/conf.d/
    
  php:
    image: oddoson/basephp:7.1
    container_name: php
    restart: always
    expose: 9000
    volumes:
      - /data/www/:/usr/share/nginx/html
      # - /Users/suzhugen/Documents/dev/www:/usr/share/nginx/html
    links:
      - mysql:mysql
      - mongo:mongo
    # networks:
    #   - "netName2"

   mysql:
    image: mysql:5.6
    container_name: mongo
    restart: always
    expose: 3306
    volumes:
      - /data/mysql/:/var/lib/mysql

   mongo:
    image: mongo:3.6
    container_name: mongo
    expose: 27017
    restart: always
    volumes:
      - /data/mongo/:/data/db

# networks:
#   netName1:
#     driver: bridge
#   netName2:
#     driver: bridge
  